"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6340],{1605:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"intro","title":"Gi\u1edbi Thi\u1ec7u ML/AI","description":"1. T\u1ed5ng Quan","source":"@site/ml-ai-docs/intro.md","sourceDirName":".","slug":"/intro","permalink":"/SmartCity-Platform/ml-ai/intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Gi\u1edbi Thi\u1ec7u ML/AI"},"sidebar":"mlAiSidebar"}');var s=r(4848),l=r(8453);const t={sidebar_position:1,title:"Gi\u1edbi Thi\u1ec7u ML/AI"},d="ML/AI Service - Smart City Platform",c={},h=[{value:"1. T\u1ed5ng Quan",id:"1-t\u1ed5ng-quan",level:2},{value:"Vai tr\xf2 trong h\u1ec7 th\u1ed1ng",id:"vai-tr\xf2-trong-h\u1ec7-th\u1ed1ng",level:3},{value:"Data Flow Chi Ti\u1ebft",id:"data-flow-chi-ti\u1ebft",level:3},{value:"2. C\xf4ng Ngh\u1ec7 S\u1eed D\u1ee5ng",id:"2-c\xf4ng-ngh\u1ec7-s\u1eed-d\u1ee5ng",level:2},{value:"T\u1ea1i sao ch\u1ecdn FastAPI?",id:"t\u1ea1i-sao-ch\u1ecdn-fastapi",level:3},{value:"T\u1ea1i sao ch\u1ecdn IsolationForest?",id:"t\u1ea1i-sao-ch\u1ecdn-isolationforest",level:3},{value:"3. Ki\u1ebfn Tr\xfac Source Code",id:"3-ki\u1ebfn-tr\xfac-source-code",level:2},{value:"M\xf4 t\u1ea3 c\xe1c file ch\xednh",id:"m\xf4-t\u1ea3-c\xe1c-file-ch\xednh",level:3},{value:"4. API Endpoints",id:"4-api-endpoints",level:2},{value:"4.1 POST /predict",id:"41-post-predict",level:3},{value:"4.2 GET /health",id:"42-get-health",level:3},{value:"4.3 GET /",id:"43-get-",level:3},{value:"5. Thu\u1eadt To\xe1n IsolationForest",id:"5-thu\u1eadt-to\xe1n-isolationforest",level:2},{value:"5.1 Nguy\xean l\xfd ho\u1ea1t \u0111\u1ed9ng",id:"51-nguy\xean-l\xfd-ho\u1ea1t-\u0111\u1ed9ng",level:3},{value:"5.2 Quy tr\xecnh",id:"52-quy-tr\xecnh",level:3},{value:"5.3 C\xf4ng th\u1ee9c",id:"53-c\xf4ng-th\u1ee9c",level:3},{value:"5.4 Trong code",id:"54-trong-code",level:3},{value:"6. Training Data",id:"6-training-data",level:2},{value:"6.1 Temperature Model",id:"61-temperature-model",level:3},{value:"6.2 Humidity Model",id:"62-humidity-model",level:3},{value:"6.3 CO2 Model",id:"63-co2-model",level:3},{value:"7. Semantic Mapping (Camera Events)",id:"7-semantic-mapping-camera-events",level:2},{value:"8. Performance",id:"8-performance",level:2},{value:"8.1 Latency",id:"81-latency",level:3},{value:"8.2 Resource Usage",id:"82-resource-usage",level:3},{value:"9. Deployment",id:"9-deployment",level:2},{value:"Docker (Recommended)",id:"docker-recommended",level:3},{value:"Docker Compose",id:"docker-compose",level:3},{value:"Manual (Development)",id:"manual-development",level:3},{value:"10. Demo Commands",id:"10-demo-commands",level:2},{value:"11. Integration v\u1edbi Backend",id:"11-integration-v\u1edbi-backend",level:2},{value:"12. Auto-Retraining Model",id:"12-auto-retraining-model",level:2},{value:"12.1 Ki\u1ebfn tr\xfac Retraining",id:"121-ki\u1ebfn-tr\xfac-retraining",level:3},{value:"12.2 Quy tr\xecnh Retraining",id:"122-quy-tr\xecnh-retraining",level:3},{value:"12.3 Hot-Swap Mechanism",id:"123-hot-swap-mechanism",level:3},{value:"12.4 Validation Rules",id:"124-validation-rules",level:3},{value:"12.5 Retraining Code Logic",id:"125-retraining-code-logic",level:3},{value:"12.6 Benefits",id:"126-benefits",level:3},{value:"13. T\u1ed5ng K\u1ebft",id:"13-t\u1ed5ng-k\u1ebft",level:2},{value:"\u0110\xe3 ho\xe0n th\xe0nh",id:"\u0111\xe3-ho\xe0n-th\xe0nh",level:3},{value:"Metrics",id:"metrics",level:3}];function a(n){const e={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"mlai-service---smart-city-platform",children:"ML/AI Service - Smart City Platform"})}),"\n",(0,s.jsx)(e.h2,{id:"1-t\u1ed5ng-quan",children:"1. T\u1ed5ng Quan"}),"\n",(0,s.jsxs)(e.p,{children:["ML Service l\xe0 d\u1ecbch v\u1ee5 ",(0,s.jsx)(e.strong,{children:"Machine Learning"})," \u0111\u01b0\u1ee3c x\xe2y d\u1ef1ng b\u1eb1ng ",(0,s.jsx)(e.strong,{children:"FastAPI"})," (Python), ch\u1ecbu tr\xe1ch nhi\u1ec7m ",(0,s.jsx)(e.strong,{children:"ph\xe2n lo\u1ea1i t\u1ef1 \u0111\u1ed9ng d\u1eef li\u1ec7u IoT"})," th\xe0nh c\xe1c m\u1ee9c \u0111\u1ed9 quan tr\u1ecdng (HOT/COLD) b\u1eb1ng thu\u1eadt to\xe1n ",(0,s.jsx)(e.strong,{children:"IsolationForest"}),"."]}),"\n",(0,s.jsx)(e.h3,{id:"vai-tr\xf2-trong-h\u1ec7-th\u1ed1ng",children:"Vai tr\xf2 trong h\u1ec7 th\u1ed1ng"}),"\n",(0,s.jsx)(e.mermaid,{value:"graph LR\r\n    A[Sensors IoT] --\x3e B[Backend Spring Boot]\r\n    B --\x3e|POST /predict| C[ML Service]\r\n    C --\x3e|HOT/COLD| B\r\n    B --\x3e|HOT| D[Redis]\r\n    B --\x3e|COLD| E[MongoDB]\r\n    \r\n    style C fill:#FFB6C1\r\n    style B fill:#90EE90"}),"\n",(0,s.jsx)(e.h3,{id:"data-flow-chi-ti\u1ebft",children:"Data Flow Chi Ti\u1ebft"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"                              ML-SERVICE\r\n                         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                         \u2502                                        \u2502\r\n   Sensor Data           \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u2502\r\n       \u2193                 \u2502    \u2502 Prediction  \u2502                     \u2502\r\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502    \u2502             \u2502                     \u2502\r\n  \u2502 Backend \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502    \u2502 confidence? \u2502                     \u2502\r\n  \u2502 (Java)  \u2502   POST     \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2502\r\n  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  /predict  \u2502           \u2502                            \u2502\r\n       \u2502                 \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2510                      \u2502\r\n       \u2502                 \u2502     \u2502           \u2502                      \u2502\r\n       \u2502                 \u2502   >0.8       \u22640.8                      \u2502\r\n       \u2502                 \u2502     \u2502           \u2502                      \u2502\r\n       \u2502                 \u2502     \u25bc           \u25bc                      \u2502\r\n       \u2502                 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\r\n       \u2502                 \u2502  \u2502Return\u2502   \u2502 Return   \u2502               \u2502\r\n       \u2502                 \u2502  \u2502HOT/  \u2502   \u2502 HOT/COLD \u2502               \u2502\r\n       \u2502                 \u2502  \u2502COLD  \u2502   \u2502    +     \u2502               \u2502\r\n       \u2502                 \u2502  \u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2518   \u2502 Log to   \u2502               \u2502\r\n       \u2502                 \u2502     \u2502       \u2502 SQLite   \u2502\u25c4\u2500\u2500\u2500 UNKNOWN   \u2502\r\n       \u2502                 \u2502     \u2502       \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518    l\u01b0u \u1edf \u0111\xe2y! \u2502\r\n       \u2502                 \u2502     \u2502            \u2502                     \u2502\r\n       \u2502                 \u2514\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502                       \u2502            \u2502\r\n       \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\r\n       \u2502                                    \u2502\r\n       \u2502 HOT/COLD only                      \u2502\r\n       \u2502 (Backend kh\xf4ng bi\u1ebft UNKNOWN)       \u2502\r\n       \u25bc                                    \u25bc\r\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n  \u2502  Redis  \u2502 \u2190 HOT                   \u2502  SQLite  \u2502 \u2190 UNKNOWN\r\n  \u2502 MongoDB \u2502 \u2190 COLD                  \u2502 (in ML)  \u2502   events\r\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Gi\u1ea3i th\xedch:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"confidence > 0.8"}),": Model tin t\u01b0\u1edfng \u2192 tr\u1ea3 v\u1ec1 HOT/COLD tr\u1ef1c ti\u1ebfp"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"confidence \u2264 0.8"}),": Model kh\xf4ng ch\u1eafc ch\u1eafn \u2192 v\u1eabn tr\u1ea3 HOT/COLD nh\u01b0ng log v\xe0o SQLite \u0111\u1ec3 review"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Backend"}),": Ch\u1ec9 nh\u1eadn HOT/COLD, kh\xf4ng bi\u1ebft v\u1ec1 UNKNOWN (backward compatible)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"SQLite"}),": L\u01b0u tr\u1eef c\xe1c events c\u1ea7n operator review"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"2-c\xf4ng-ngh\u1ec7-s\u1eed-d\u1ee5ng",children:"2. C\xf4ng Ngh\u1ec7 S\u1eed D\u1ee5ng"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"C\xf4ng ngh\u1ec7"}),(0,s.jsx)(e.th,{children:"Phi\xean b\u1ea3n"}),(0,s.jsx)(e.th,{children:"Vai tr\xf2"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"FastAPI"})}),(0,s.jsx)(e.td,{children:"0.104+"}),(0,s.jsx)(e.td,{children:"Web framework (async, high performance)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"scikit-learn"})}),(0,s.jsx)(e.td,{children:"1.3+"}),(0,s.jsx)(e.td,{children:"Machine Learning library"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"IsolationForest"})}),(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"Anomaly detection algorithm"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Python"})}),(0,s.jsx)(e.td,{children:"3.10"}),(0,s.jsx)(e.td,{children:"Runtime"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Uvicorn"})}),(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"ASGI server"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Joblib"})}),(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"Model serialization"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"t\u1ea1i-sao-ch\u1ecdn-fastapi",children:"T\u1ea1i sao ch\u1ecdn FastAPI?"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Async native"})," - X\u1eed l\xfd \u0111\u1ed3ng th\u1eddi nhi\u1ec1u request"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Auto validation"})," v\u1edbi Pydantic schemas"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Auto docs"})," t\u1ea1i ",(0,s.jsx)(e.code,{children:"/docs"})," (Swagger UI)"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"High performance"})," - Ngang v\u1edbi NodeJS, Go"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"t\u1ea1i-sao-ch\u1ecdn-isolationforest",children:"T\u1ea1i sao ch\u1ecdn IsolationForest?"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Unsupervised"})," - Kh\xf4ng c\u1ea7n labeled data"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Fast inference"})," - ~10-15ms per prediction"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Robust"})," - Ho\u1ea1t \u0111\u1ed9ng t\u1ed1t v\u1edbi sensor data"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Simple"})," - D\u1ec5 deploy v\xe0 maintain"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"3-ki\u1ebfn-tr\xfac-source-code",children:"3. Ki\u1ebfn Tr\xfac Source Code"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"ml-service/\r\n\u251c\u2500\u2500 app/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 main.py              # FastAPI application entry point\r\n\u2502   \u251c\u2500\u2500 config.py            # Configuration & semantic mapping\r\n\u2502   \u2514\u2500\u2500 models/\r\n\u2502       \u251c\u2500\u2500 loader.py        # Model loading utilities\r\n\u2502       \u251c\u2500\u2500 schemas.py       # Pydantic request/response schemas\r\n\u2502       \u251c\u2500\u2500 temperature_model.pkl\r\n\u2502       \u251c\u2500\u2500 humidity_model.pkl\r\n\u2502       \u2514\u2500\u2500 co2_model.pkl\r\n\u251c\u2500\u2500 train_models.py          # Training script\r\n\u251c\u2500\u2500 requirements.txt\r\n\u251c\u2500\u2500 Dockerfile\r\n\u2514\u2500\u2500 entrypoint.sh            # Auto-train on startup\n"})}),"\n",(0,s.jsx)(e.h3,{id:"m\xf4-t\u1ea3-c\xe1c-file-ch\xednh",children:"M\xf4 t\u1ea3 c\xe1c file ch\xednh"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"File"}),(0,s.jsx)(e.th,{children:"Ch\u1ee9c n\u0103ng"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"main.py"})}),(0,s.jsxs)(e.td,{children:["FastAPI app, endpoints ",(0,s.jsx)(e.code,{children:"/predict"}),", ",(0,s.jsx)(e.code,{children:"/health"})]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"config.py"})}),(0,s.jsx)(e.td,{children:"Paths, semantic map cho camera events"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"loader.py"})}),(0,s.jsxs)(e.td,{children:["Load models t\u1eeb ",(0,s.jsx)(e.code,{children:".pkl"})," files"]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"schemas.py"})}),(0,s.jsx)(e.td,{children:"Pydantic schemas cho request/response"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"train_models.py"})}),(0,s.jsx)(e.td,{children:"Script hu\u1ea5n luy\u1ec7n IsolationForest"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"4-api-endpoints",children:"4. API Endpoints"}),"\n",(0,s.jsx)(e.h3,{id:"41-post-predict",children:"4.1 POST /predict"}),"\n",(0,s.jsx)(e.p,{children:"Ph\xe2n lo\u1ea1i d\u1eef li\u1ec7u sensor ho\u1eb7c camera event."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Request - Sensor:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "source": "sensor",\r\n  "metric_type": "temperature",\r\n  "value": 45.5\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Response:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "label": "HOT",\r\n  "uri": "https://schema.org/Warning",\r\n  "desc": "Temperature Anomaly Detected",\r\n  "metric_type": "temperature",\r\n  "value": 45.5\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Request - Camera:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "source": "camera",\r\n  "event": "fire"\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Response:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "label": "HOT",\r\n  "uri": "https://schema.org/FireEvent",\r\n  "desc": "Fire Hazard Detected"\r\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"42-get-health",children:"4.2 GET /health"}),"\n",(0,s.jsx)(e.p,{children:"Health check endpoint."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Response:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "status": "ok",\r\n  "models_loaded": {\r\n    "temperature": true,\r\n    "humidity": true,\r\n    "co2": true\r\n  },\r\n  "total_models": 3\r\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"43-get-",children:"4.3 GET /"}),"\n",(0,s.jsx)(e.p,{children:"Root endpoint."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Response:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\r\n  "service": "ML Anomaly Detection",\r\n  "version": "1.0.0",\r\n  "status": "running",\r\n  "docs": "/docs"\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"5-thu\u1eadt-to\xe1n-isolationforest",children:"5. Thu\u1eadt To\xe1n IsolationForest"}),"\n",(0,s.jsx)(e.h3,{id:"51-nguy\xean-l\xfd-ho\u1ea1t-\u0111\u1ed9ng",children:"5.1 Nguy\xean l\xfd ho\u1ea1t \u0111\u1ed9ng"}),"\n",(0,s.jsxs)(e.p,{children:["IsolationForest ph\xe1t hi\u1ec7n anomaly b\u1eb1ng c\xe1ch ",(0,s.jsx)(e.strong,{children:"c\xf4 l\u1eadp"})," c\xe1c \u0111i\u1ec3m d\u1eef li\u1ec7u:"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Core Idea:"})," \u0110i\u1ec3m b\u1ea5t th\u01b0\u1eddng d\u1ec5 b\u1ecb c\xf4 l\u1eadp h\u01a1n \u0111i\u1ec3m b\xecnh th\u01b0\u1eddng"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"D\u1eef li\u1ec7u b\xecnh th\u01b0\u1eddng          D\u1eef li\u1ec7u b\u1ea5t th\u01b0\u1eddng\r\n(dense cluster)              (isolated)\r\n\r\n     o o o                        \r\n    o O O o  \u2190 C\u1ea7n nhi\u1ec1u          x  \u2190 Ch\u1ec9 1-2 splits\r\n     o o o     splits                 l\xe0 isolate \u0111\u01b0\u1ee3c!\n"})}),"\n",(0,s.jsx)(e.h3,{id:"52-quy-tr\xecnh",children:"5.2 Quy tr\xecnh"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Build Random Forest"})," - T\u1ea1o 100 random decision trees"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Random Splits"})," - M\u1ed7i tree split ng\u1eabu nhi\xean theo feature v\xe0 value"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Path Length"})," - \u0110o \u0111\u1ed9 s\xe2u c\u1ea7n thi\u1ebft \u0111\u1ec3 isolate m\u1ed7i \u0111i\u1ec3m"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Anomaly Score"})," - \u0110i\u1ec3m c\xe0ng n\xf4ng = c\xe0ng b\u1ea5t th\u01b0\u1eddng"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"53-c\xf4ng-th\u1ee9c",children:"5.3 C\xf4ng th\u1ee9c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Anomaly Score: s(x, n) = 2^(-E(h(x)) / c(n))\r\n\r\nTrong \u0111\xf3:\r\n- E(h(x)): Path length trung b\xecnh\r\n- c(n): Normalization factor\r\n- s < 0.5: Normal (inlier)\r\n- s > 0.5: Anomaly (outlier)\n"})}),"\n",(0,s.jsx)(e.h3,{id:"54-trong-code",children:"5.4 Trong code"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# IsolationForest returns: 1 = Normal, -1 = Anomaly\r\nprediction = model.predict([[value]])\r\n\r\nif prediction[0] == 1:\r\n    label = "COLD"   # Normal\r\nelse:\r\n    label = "HOT"    # Anomaly\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"6-training-data",children:"6. Training Data"}),"\n",(0,s.jsx)(e.h3,{id:"61-temperature-model",children:"6.1 Temperature Model"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Range:"})," 15-35\xb0C (normal urban temperature)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Samples:"})," 10,000 (uniform + seasonal patterns)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Contamination:"})," 0.1 (10% anomalies expected)"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"62-humidity-model",children:"6.2 Humidity Model"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Range:"})," 30-80%"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Samples:"})," 10,000"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Contamination:"})," 0.1"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"63-co2-model",children:"6.3 CO2 Model"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Range:"})," 350-900 ppm (safe levels)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Samples:"})," 7,000 (outdoor + indoor)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Contamination:"})," 0.1"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"7-semantic-mapping-camera-events",children:"7. Semantic Mapping (Camera Events)"}),"\n",(0,s.jsx)(e.p,{children:"Camera events \u0111\u01b0\u1ee3c map tr\u1ef1c ti\u1ebfp theo b\u1ea3ng:"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Event"}),(0,s.jsx)(e.th,{children:"Label"}),(0,s.jsx)(e.th,{children:"URI"}),(0,s.jsx)(e.th,{children:"Description"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"fire"})}),(0,s.jsx)(e.td,{children:"HOT"}),(0,s.jsx)(e.td,{children:"schema.org/FireEvent"}),(0,s.jsx)(e.td,{children:"Fire Hazard Detected"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"accident"})}),(0,s.jsx)(e.td,{children:"HOT"}),(0,s.jsx)(e.td,{children:"schema.org/TrafficIncident"}),(0,s.jsx)(e.td,{children:"Traffic Accident"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"traffic_jam"})}),(0,s.jsx)(e.td,{children:"WARM"}),(0,s.jsx)(e.td,{children:"w3id.org/sosa/Observation"}),(0,s.jsx)(e.td,{children:"Traffic Congestion"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"normal"})}),(0,s.jsx)(e.td,{children:"COLD"}),(0,s.jsx)(e.td,{children:"schema.org/SafeCondition"}),(0,s.jsx)(e.td,{children:"Normal Conditions"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.em,{children:"unknown"})}),(0,s.jsx)(e.td,{children:"UNKNOWN"}),(0,s.jsx)(e.td,{children:"schema.org/Thing"}),(0,s.jsx)(e.td,{children:"Unknown Event"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"8-performance",children:"8. Performance"}),"\n",(0,s.jsx)(e.h3,{id:"81-latency",children:"8.1 Latency"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Metric"}),(0,s.jsx)(e.th,{children:"Value"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Average"}),(0,s.jsx)(e.td,{children:"~15ms"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"p95"}),(0,s.jsx)(e.td,{children:"~30ms"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"p99"}),(0,s.jsx)(e.td,{children:"~50ms"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"82-resource-usage",children:"8.2 Resource Usage"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Resource"}),(0,s.jsx)(e.th,{children:"Usage"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Memory"}),(0,s.jsx)(e.td,{children:"~150-200MB"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"CPU"}),(0,s.jsxs)(e.td,{children:[(0,s.jsx)(e.code,{children:"<10%"})," at 20 req/s"]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Startup"}),(0,s.jsx)(e.td,{children:"~2-3 seconds"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"9-deployment",children:"9. Deployment"}),"\n",(0,s.jsx)(e.h3,{id:"docker-recommended",children:"Docker (Recommended)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Build\r\ndocker build -t smart-city-ml ./ml-service\r\n\r\n# Run\r\ndocker run -p 8000:8000 smart-city-ml\n"})}),"\n",(0,s.jsx)(e.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"docker compose up -d ml-service\n"})}),"\n",(0,s.jsx)(e.h3,{id:"manual-development",children:"Manual (Development)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cd ml-service\r\npip install -r requirements.txt\r\n\r\n# Train models (if not exist)\r\npython train_models.py\r\n\r\n# Start server\r\nuvicorn app.main:app --host 0.0.0.0 --port 8000 --reload\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"10-demo-commands",children:"10. Demo Commands"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Health check\r\ncurl http://localhost:8000/health\r\n\r\n# Predict normal temperature\r\ncurl -X POST http://localhost:8000/predict \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"source":"sensor","value":25,"metric_type":"temperature"}\'\r\n# \u2192 label: COLD\r\n\r\n# Predict anomaly temperature  \r\ncurl -X POST http://localhost:8000/predict \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"source":"sensor","value":80,"metric_type":"temperature"}\'\r\n# \u2192 label: HOT\r\n\r\n# Camera event\r\ncurl -X POST http://localhost:8000/predict \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"source":"camera","event":"fire"}\'\r\n# \u2192 label: HOT\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"11-integration-v\u1edbi-backend",children:"11. Integration v\u1edbi Backend"}),"\n",(0,s.jsx)(e.p,{children:"Backend (Spring Boot) g\u1ecdi ML Service qua REST API:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Service\r\npublic class MLServiceClient {\r\n    \r\n    @Value("${ml.service.url}")\r\n    private String mlServiceUrl;\r\n    \r\n    public String classify(SensorData data) {\r\n        String url = mlServiceUrl + "/predict";\r\n        \r\n        Map<String, Object> request = Map.of(\r\n            "source", "sensor",\r\n            "metric_type", data.getMetricType(),\r\n            "value", data.getValue()\r\n        );\r\n        \r\n        MLResponse response = restTemplate.postForObject(\r\n            url, request, MLResponse.class\r\n        );\r\n        \r\n        return response.getLabel();  // "HOT" or "COLD"\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"12-auto-retraining-model",children:"12. Auto-Retraining Model"}),"\n",(0,s.jsx)(e.h3,{id:"121-ki\u1ebfn-tr\xfac-retraining",children:"12.1 Ki\u1ebfn tr\xfac Retraining"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                     ML-SERVICE                               \u2502\r\n\u2502                                                              \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\r\n\u2502  \u2502   FastAPI    \u2502              \u2502   Worker     \u2502             \u2502\r\n\u2502  \u2502   (Main)     \u2502              \u2502   Thread     \u2502             \u2502\r\n\u2502  \u2502              \u2502              \u2502   (Daemon)   \u2502             \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\r\n\u2502         \u2502                             \u2502                      \u2502\r\n\u2502         \u2502 Predictions                 \u2502 Check m\u1ed7i 1 gi\u1edd     \u2502\r\n\u2502         \u2502                             \u2502                      \u2502\r\n\u2502         \u25bc                             \u25bc                      \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\r\n\u2502  \u2502   Models     \u2502\u25c4\u2500\u2500\u2500 HOT-SWAP\u2500\u2524  Retrainer   \u2502             \u2502\r\n\u2502  \u2502   (Global)   \u2502   (Atomic)   \u2502              \u2502             \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\r\n\u2502                                       \u2502                      \u2502\r\n\u2502                                       \u2502 Query labeled data   \u2502\r\n\u2502                                       \u25bc                      \u2502\r\n\u2502                                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\r\n\u2502                                \u2502    SQLite    \u2502             \u2502\r\n\u2502                                \u2502   Database   \u2502             \u2502\r\n\u2502                                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"122-quy-tr\xecnh-retraining",children:"12.2 Quy tr\xecnh Retraining"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Check m\u1ed7i 1 gi\u1edd \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Labeled data    \u2502\r\n\u2502 >= 100 samples? \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u2502\r\n    Yes  \u2502  No \u2192 Skip\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Load original   \u2502\r\n\u2502 training data   \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Combine with    \u2502\r\n\u2502 new labeled data\u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Train new       \u2502\r\n\u2502 IsolationForest \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Validate model  \u2502\r\n\u2502 (>= 80% acc)    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n         \u2502\r\n   Pass  \u2502  Fail \u2192 Keep old\r\n         \u25bc\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 Backup old      \u2502\r\n\u2502 HOT-SWAP new    \u2502\r\n\u2502 Save to disk    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"123-hot-swap-mechanism",children:"12.3 Hot-Swap Mechanism"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zero downtime update:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'# Atomic operation - Thread-safe trong Python (GIL)\r\nmodels["temperature"] = new_model\r\n\r\n# Predictions ti\u1ebfp t\u1ee5c KH\xd4NG GI\xc1N \u0110O\u1ea0N!\r\n# - Thread \u0111ang predict: d\xf9ng old model\r\n# - Thread m\u1edbi: d\xf9ng new model\r\n# - Kh\xf4ng c\xf3 locking, kh\xf4ng c\xf3 downtime\n'})}),"\n",(0,s.jsx)(e.h3,{id:"124-validation-rules",children:"12.4 Validation Rules"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Rule"}),(0,s.jsx)(e.th,{children:"Threshold"}),(0,s.jsx)(e.th,{children:"M\u1ee5c \u0111\xedch"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Min samples"}),(0,s.jsx)(e.td,{children:">= 100"}),(0,s.jsx)(e.td,{children:"\u0110\u1ee7 data \u0111\u1ec3 retrain"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Accuracy"}),(0,s.jsx)(e.td,{children:">= 80%"}),(0,s.jsx)(e.td,{children:"Kh\xf4ng l\xe0m model k\xe9m \u0111i"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Normal rate"}),(0,s.jsx)(e.td,{children:">= 80%"}),(0,s.jsx)(e.td,{children:"V\u1eabn nh\u1eadn ra patterns c\u0169"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"125-retraining-code-logic",children:"12.5 Retraining Code Logic"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'class RetrainingWorker(Thread):\r\n    def run(self):\r\n        while True:\r\n            for metric_type in ["temperature", "humidity", "co2"]:\r\n                # 1. Query labeled events\r\n                labeled = db.get_labeled_for_training(metric_type)\r\n                \r\n                if len(labeled) >= 100:\r\n                    # 2. Load original + new data\r\n                    original = load_original_data(metric_type)\r\n                    combined = np.vstack([original, labeled])\r\n                    \r\n                    # 3. Train new model\r\n                    new_model = IsolationForest().fit(combined)\r\n                    \r\n                    # 4. Validate\r\n                    if validate(new_model, original):\r\n                        # 5. Backup + Hot-swap\r\n                        backup(models[metric_type])\r\n                        models[metric_type] = new_model\r\n                        \r\n                        # 6. Mark data as used\r\n                        db.mark_used_for_training(labeled)\r\n            \r\n            sleep(3600)  # 1 hour\n'})}),"\n",(0,s.jsx)(e.h3,{id:"126-benefits",children:"12.6 Benefits"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Continuous Learning"})," - Model t\u1ef1 c\u1ea3i thi\u1ec7n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Zero Downtime"})," - Hot-swap atomic"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Automatic"})," - Kh\xf4ng c\u1ea7n manual intervention"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 ",(0,s.jsx)(e.strong,{children:"Safe"})," - Validate tr\u01b0\u1edbc khi deploy"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"13-t\u1ed5ng-k\u1ebft",children:"13. T\u1ed5ng K\u1ebft"}),"\n",(0,s.jsx)(e.h3,{id:"\u0111\xe3-ho\xe0n-th\xe0nh",children:"\u0110\xe3 ho\xe0n th\xe0nh"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 IsolationForest anomaly detection"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 3 models: temperature, humidity, CO2"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 REST API v\u1edbi FastAPI"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 Camera event semantic mapping"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 Docker deployment"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 Auto-train on startup"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"metrics",children:"Metrics"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Metric"}),(0,s.jsx)(e.th,{children:"Target"}),(0,s.jsx)(e.th,{children:"Achieved"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Latency"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"<50ms"})}),(0,s.jsx)(e.td,{children:"~15ms \u2705"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Models"}),(0,s.jsx)(e.td,{children:"3"}),(0,s.jsx)(e.td,{children:"3 \u2705"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Uptime"}),(0,s.jsx)(e.td,{children:"99%"}),(0,s.jsx)(e.td,{children:"99%+ \u2705"})]})]})]})]})}function o(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>d});var i=r(6540);const s={},l=i.createContext(s);function t(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);