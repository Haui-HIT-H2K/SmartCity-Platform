"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2502],{3085:(n,r,t)=>{t.r(r),t.d(r,{assets:()=>h,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"intro","title":"Lu\u1ed3ng D\u1eef Li\u1ec7u (Data Flow)","description":"\u0110\xe2y l\xe0 lu\u1ed3ng d\u1eef li\u1ec7u (data flow) End-to-End c\u1ee7a h\u1ec7 th\u1ed1ng SmartCity-Platform, k\u1ebft h\u1ee3p gi\u1eefa \xfd t\u01b0\u1edfng DNS Routing & PULL Model (Ti\xeau ch\xed 7) v\xe0 y\xeau c\u1ea7u NGSI-LD (Ti\xeau ch\xed K\u1ef9 thu\u1eadt).","source":"@site/infrastructure-docs/intro.md","sourceDirName":".","slug":"/intro","permalink":"/SmartCity-Platform/infrastructure/intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Lu\u1ed3ng D\u1eef Li\u1ec7u (Data Flow)"},"sidebar":"infraSidebar","previous":{"title":"Docker Deployment","permalink":"/SmartCity-Platform/infrastructure/docker"}}');var e=t(4848),s=t(8453);const o={sidebar_position:2,title:"Lu\u1ed3ng D\u1eef Li\u1ec7u (Data Flow)"},l=void 0,h={},c=[{value:"1. S\u01a1 \u0111\u1ed3 Ki\u1ebfn tr\xfac T\u1ed5ng th\u1ec3",id:"1-s\u01a1-\u0111\u1ed3-ki\u1ebfn-tr\xfac-t\u1ed5ng-th\u1ec3",level:2},{value:"2. Gi\u1ea3i th\xedch Lu\u1ed3ng D\u1eef li\u1ec7u",id:"2-gi\u1ea3i-th\xedch-lu\u1ed3ng-d\u1eef-li\u1ec7u",level:2}];function d(n){const r={br:"br",h2:"h2",hr:"hr",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.p,{children:["\u0110\xe2y l\xe0 lu\u1ed3ng d\u1eef li\u1ec7u (data flow) End-to-End c\u1ee7a h\u1ec7 th\u1ed1ng SmartCity-Platform, k\u1ebft h\u1ee3p gi\u1eefa \xfd t\u01b0\u1edfng ",(0,e.jsx)(r.strong,{children:"DNS Routing & PULL Model"})," (Ti\xeau ch\xed 7) v\xe0 y\xeau c\u1ea7u ",(0,e.jsx)(r.strong,{children:"NGSI-LD"})," (Ti\xeau ch\xed K\u1ef9 thu\u1eadt)."]}),"\n",(0,e.jsx)(r.hr,{}),"\n",(0,e.jsx)(r.h2,{id:"1-s\u01a1-\u0111\u1ed3-ki\u1ebfn-tr\xfac-t\u1ed5ng-th\u1ec3",children:"1. S\u01a1 \u0111\u1ed3 Ki\u1ebfn tr\xfac T\u1ed5ng th\u1ec3"}),"\n",(0,e.jsx)(r.mermaid,{value:'graph LR\r\n    subgraph DataGen["\ud83d\udce1 Data Generation"]\r\n        A["\ud83d\udc0d Python IoT<br/>Simulator"]\r\n    end\r\n\r\n    subgraph EdgeStorage["\ud83d\udcbe Edge Storage"]\r\n        B["\ud83d\udc30 RabbitMQ<br/>Node 1"]\r\n        L["\ud83d\udc30 RabbitMQ<br/>Node 2"]\r\n    end\r\n\r\n    subgraph CoreProcessing["\u2699\ufe0f Core Processing"]\r\n        C["\u2615 Spring Boot<br/>Backend"]\r\n    end\r\n\r\n    subgraph MLLayer["\ud83e\udd16 ML Classification"]\r\n        D["\ud83e\udde0 FastAPI<br/>ML Service"]\r\n    end\r\n\r\n    subgraph TieredStorage["\ud83d\uddc4\ufe0f Tiered Storage"]\r\n        E["\ud83d\udd25 Redis<br/>HOT"]\r\n        K["\ud83d\udce6 MongoDB<br/>WARM"]\r\n        F["\u2744\ufe0f MongoDB<br/>COLD"]\r\n    end\r\n\r\n    subgraph Presentation["\ud83d\udda5\ufe0f Presentation"]\r\n        G["\ud83c\udf10 NuxtJS<br/>Frontend"]\r\n    end\r\n\r\n    %% Data Flow: Generation \u2192 Edge\r\n    A --\x3e|"Publish"| B\r\n    A --\x3e|"Publish"| L\r\n\r\n    %% Data Flow: Edge \u2192 Backend\r\n    B --\x3e|"Pull Batch"| C\r\n    L --\x3e|"Pull Batch"| C\r\n\r\n    %% ML Classification Flow (2 separate arrows)\r\n    C --\x3e|"\ud83d\udce4 Send CLassically Data"| D\r\n    D --\x3e|"\ud83d\udce5 HOT/WARM/COLD"| C\r\n\r\n    %% Tiered Storage Routing\r\n    C --\x3e|"\ud83d\udd25 HOT"| E\r\n    C --\x3e|"\ud83d\udce6 WARM"| K\r\n    C --\x3e|"\u2744\ufe0f COLD"| F\r\n\r\n    %% API Layer\r\n    C --\x3e|"REST API"| G\r\n\r\n\r\n    %% Styling\r\n    style A fill:#3776AB,stroke:#FFD43B,stroke-width:2px,color:#fff\r\n    style B fill:#FF6600,stroke:#333,stroke-width:2px,color:#fff\r\n    style L fill:#FF6600,stroke:#333,stroke-width:2px,color:#fff\r\n    style C fill:#6DB33F,stroke:#333,stroke-width:2px,color:#fff\r\n    style D fill:#009688,stroke:#333,stroke-width:2px,color:#fff\r\n    style E fill:#DC382D,stroke:#333,stroke-width:2px,color:#fff\r\n    style K fill:#4DB33D,stroke:#333,stroke-width:2px,color:#fff\r\n    style F fill:#4169E1,stroke:#333,stroke-width:2px,color:#fff\r\n    style G fill:#00DC82,stroke:#333,stroke-width:2px,color:#000'}),"\n",(0,e.jsx)(r.hr,{}),"\n",(0,e.jsx)(r.h2,{id:"2-gi\u1ea3i-th\xedch-lu\u1ed3ng-d\u1eef-li\u1ec7u",children:"2. Gi\u1ea3i th\xedch Lu\u1ed3ng D\u1eef li\u1ec7u"}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"Lu\u1ed3ng 1 & 2: PUSH & Ph\xe2n lo\u1ea1i (Routing)"}),(0,e.jsx)(r.br,{}),"\n",(0,e.jsx)(r.strong,{children:"A (Ngu\u1ed3n D\u1eef li\u1ec7u):"})," C\xe1c thi\u1ebft b\u1ecb (Sensor, Camera, User App) g\u1eedi d\u1eef li\u1ec7u th\xf4 (raw data) \u0111\u1ebfn m\u1ed9t endpoint duy nh\u1ea5t."]}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"B (DNS Routing):"}),' D\u1ecbch v\u1ee5 DNS Routing (ho\u1eb7c m\u1ed9t API Gateway) "\u0111\u1ecdc" lo\u1ea1i d\u1eef li\u1ec7u (v\xed d\u1ee5: qua URL ho\u1eb7c header) v\xe0 ph\xe2n lo\u1ea1i n\xf3 ngay l\u1eadp t\u1ee9c.']}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)(r.strong,{children:"D\u1eef li\u1ec7u PUSH \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\u01b0\u1edbng v\xe0o 3 kho \u0111\u1ec7m ri\xeang bi\u1ec7t:"})}),"\n",(0,e.jsxs)(r.ul,{children:["\n",(0,e.jsxs)(r.li,{children:["C\u1ea3nh b\xe1o kh\u1ea9n c\u1ea5p v\xe0o ",(0,e.jsx)(r.strong,{children:"C1 (Edge N\xf3ng)"}),"."]}),"\n",(0,e.jsxs)(r.li,{children:["D\u1eef li\u1ec7u c\u1eadp nh\u1eadt th\u01b0\u1eddng xuy\xean v\xe0o ",(0,e.jsx)(r.strong,{children:"C2 (Edge \u1ea4m)"}),"."]}),"\n",(0,e.jsxs)(r.li,{children:["D\u1eef li\u1ec7u log/th\u1ed1ng k\xea v\xe0o ",(0,e.jsx)(r.strong,{children:"C3 (Edge L\u1ea1nh)"}),"."]}),"\n"]}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"Lu\u1ed3ng 3: PULL \u01afu ti\xean (\xdd t\u01b0\u1edfng C\u1ed1t l\xf5i)"}),(0,e.jsx)(r.br,{}),"\n",(0,e.jsx)(r.strong,{children:"F (Smart Agent):"}),' \u0110\xe2y l\xe0 "b\u1ed9 n\xe3o" (backend do \u0111\u1ed9i ph\xe1t tri\u1ec3n). N\xf3 ch\u1ee7 \u0111\u1ed9ng PULL d\u1eef li\u1ec7u t\u1eeb 3 kho \u0111\u1ec7m v\u1edbi th\u1ee9 t\u1ef1 \u01b0u ti\xean nghi\xeam ng\u1eb7t:']}),"\n",(0,e.jsxs)(r.ul,{children:["\n",(0,e.jsxs)(r.li,{children:[(0,e.jsx)(r.strong,{children:"\u01afu ti\xean 1:"})," Lu\xf4n PULL v\xe0 x\u1eed l\xfd ",(0,e.jsx)(r.strong,{children:"C1 (N\xf3ng)"})," tr\u01b0\u1edbc."]}),"\n",(0,e.jsxs)(r.li,{children:[(0,e.jsx)(r.strong,{children:"\u01afu ti\xean 2:"})," Ch\u1ec9 PULL ",(0,e.jsx)(r.strong,{children:"C2 (\u1ea4m)"})," khi C1 r\u1ed7ng."]}),"\n",(0,e.jsxs)(r.li,{children:[(0,e.jsx)(r.strong,{children:"\u01afu ti\xean 3:"})," Ch\u1ec9 PULL ",(0,e.jsx)(r.strong,{children:"C3 (L\u1ea1nh)"})," khi C1 v\xe0 C2 \u0111\u1ec1u r\u1ed7ng."]}),"\n"]}),"\n",(0,e.jsx)(r.p,{children:"\u0110\xe2y ch\xednh l\xe0 c\u01a1 ch\u1ebf ch\u1ed1ng qu\xe1 t\u1ea3i v\xe0 \u0111\u1ea3m b\u1ea3o HA cho h\u1ec7 th\u1ed1ng."}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"Lu\u1ed3ng 4: X\u1eed l\xfd NGSI-LD (\u0110\xe1p \u1ee9ng \u0110\u1ec1 b\xe0i)"}),(0,e.jsx)(r.br,{}),"\n",(0,e.jsx)(r.strong,{children:"F (Smart Agent)"})," sau khi PULL d\u1eef li\u1ec7u N\xf3ng/\u1ea4m, s\u1ebd ti\u1ebfn h\xe0nh chu\u1ea9n h\xf3a ch\xfang sang \u0111\u1ecbnh d\u1ea1ng ",(0,e.jsx)(r.strong,{children:"NGSI-LD"})," (s\u1eed d\u1ee5ng ",(0,e.jsx)(r.strong,{children:"FIWARE Data Models"}),")."]}),"\n",(0,e.jsxs)(r.p,{children:["F ",(0,e.jsx)(r.strong,{children:"PUSH"})," d\u1eef li\u1ec7u \u0111\xe3 chu\u1ea9n h\xf3a v\xe0o ",(0,e.jsx)(r.strong,{children:"G (Orion-LD Broker)"}),". \u0110\xe2y ch\xednh l\xe0 ",(0,e.jsx)(r.strong,{children:"L\u1edbp N\xf3ng (In-Memory)"}),", ch\u1ee9a tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i c\u1ee7a th\xe0nh ph\u1ed1."]}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"H (L\u1edbp \u1ea4m)"}),' (s\u1eed d\u1ee5ng QuantumLeap) t\u1ef1 \u0111\u1ed9ng "\u0111\u0103ng k\xfd" (subscribe) v\u1edbi G. Ngay khi G c\xf3 d\u1eef li\u1ec7u m\u1edbi, n\xf3 s\u1ebd t\u1ef1 \u0111\u1ed9ng sao ch\xe9p sang ',(0,e.jsx)(r.strong,{children:"H (TimescaleDB)"})," \u0111\u1ec3 l\u01b0u tr\u1eef l\u1ecbch s\u1eed."]}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"Lu\u1ed3ng 5: X\u1eed l\xfd D\u1eef li\u1ec7u L\u1ea1nh"}),(0,e.jsx)(r.br,{}),"\n","Khi F (Smart Agent) PULL d\u1eef li\u1ec7u t\u1eeb ",(0,e.jsx)(r.strong,{children:"E (L\u1ea1nh)"}),", n\xf3 s\u1ebd ",(0,e.jsx)(r.strong,{children:"PUSH"})," th\u1eb3ng d\u1eef li\u1ec7u n\xe0y v\xe0o ",(0,e.jsx)(r.strong,{children:"I (MinIO)"})," \u0111\u1ec3 l\u01b0u tr\u1eef d\xe0i h\u1ea1n v\u1edbi chi ph\xed r\u1ebb."]}),"\n",(0,e.jsxs)(r.p,{children:[(0,e.jsx)(r.strong,{children:"Lu\u1ed3ng 6: \u1ee8ng d\u1ee5ng (Demo)"}),(0,e.jsx)(r.br,{}),"\n",(0,e.jsx)(r.strong,{children:"J (\u1ee8ng d\u1ee5ng GreenX)"}),' khi c\u1ea7n d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c (v\xed d\u1ee5: "AQI b\xe2y gi\u1edd?") s\u1ebd truy v\u1ea5n tr\u1ef1c ti\u1ebfp ',(0,e.jsx)(r.strong,{children:"G (L\u1edbp N\xf3ng)"}),"."]}),"\n",(0,e.jsxs)(r.p,{children:['Khi c\u1ea7n d\u1eef li\u1ec7u l\u1ecbch s\u1eed (v\xed d\u1ee5: "bi\u1ec3u \u0111\u1ed3 7 ng\xe0y qua?") s\u1ebd truy v\u1ea5n ',(0,e.jsx)(r.strong,{children:"H (L\u1edbp \u1ea4m)"}),"."]})]})}function g(n={}){const{wrapper:r}={...(0,s.R)(),...n.components};return r?(0,e.jsx)(r,{...n,children:(0,e.jsx)(d,{...n})}):d(n)}},8453:(n,r,t)=>{t.d(r,{R:()=>o,x:()=>l});var i=t(6540);const e={},s=i.createContext(e);function o(n){const r=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function l(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(e):n.components||e:o(n.components),i.createElement(s.Provider,{value:r},n.children)}}}]);