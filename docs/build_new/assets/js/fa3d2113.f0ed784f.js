"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[890],{3790:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"configuration","title":"Configuration","description":"application.yml Structure","source":"@site/backend-docs/configuration.md","sourceDirName":".","slug":"/configuration","permalink":"/SmartCity-Platform/backend/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Configuration"},"sidebar":"backendSidebar","previous":{"title":"Data Model","permalink":"/SmartCity-Platform/backend/data-model"}}');var o=n(4848),t=n(8453);const d={sidebar_position:4,title:"Configuration"},s="Configuration Guide",l={},a=[{value:"application.yml Structure",id:"applicationyml-structure",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"MongoDB",id:"mongodb",level:3},{value:"Redis",id:"redis",level:3},{value:"RabbitMQ",id:"rabbitmq",level:3},{value:"ML Service",id:"ml-service",level:3},{value:"Application",id:"application",level:3},{value:"Profile Configurations",id:"profile-configurations",level:2},{value:"local Profile (application-local.yml)",id:"local-profile-application-localyml",level:3},{value:"docker Profile (application-docker.yml)",id:"docker-profile-application-dockeryml",level:3},{value:"Configuration Properties Reference",id:"configuration-properties-reference",level:2},{value:"Ingestion Properties",id:"ingestion-properties",level:3},{value:"Storage Properties",id:"storage-properties",level:3},{value:"ML Service Properties",id:"ml-service-properties",level:3},{value:"Docker Compose Configuration",id:"docker-compose-configuration",level:2},{value:"Tuning Guide",id:"tuning-guide",level:2},{value:"High Throughput",id:"high-throughput",level:3},{value:"Low Memory",id:"low-memory",level:3},{value:"Production Deployment",id:"production-deployment",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"configuration-guide",children:"Configuration Guide"})}),"\n",(0,o.jsx)(r.h2,{id:"applicationyml-structure",children:"application.yml Structure"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"spring:\r\n  profiles:\r\n    active: docker  # Options: local, docker, prod\r\n  \r\n  application:\r\n    name: smart-city-platform\r\n  \r\n  # MongoDB Configuration\r\n  data:\r\n    mongodb:\r\n      warm:\r\n        uri: mongodb://admin:password123@core-mongo-warm:27017/warm_db?authSource=admin\r\n      cold:\r\n        uri: mongodb://admin:password123@core-mongo-cold:27017/cold_db?authSource=admin\r\n  \r\n  # Redis Configuration\r\n  redis:\r\n    host: core-redis-hot\r\n    port: 6379\r\n    timeout: 60000\r\n  \r\n  # RabbitMQ Configuration\r\n  rabbitmq:\r\n    addresses: rabbitmq-edge-1:5672,rabbitmq-edge-2:5673\r\n    username: edge_user\r\n    password: edge_pass\r\n    template:\r\n      receive-timeout: 2000\r\n\r\n# ML Service Configuration\r\nml:\r\n  service:\r\n    url: http://smart-city-ml:8000\r\n    timeout: 5000  # milliseconds\r\n\r\n# Data Ingestion Configuration\r\ningestion:\r\n  batch:\r\n    size: 1000\r\n    max-size: 5000\r\n  schedule:\r\n    fixed-rate: 10000  # milliseconds (10 seconds)\r\n\r\n# Storage Configuration\r\nstorage:\r\n  hot:\r\n    ttl-seconds: 3600  # 1 hour\r\n  warm:\r\n    retention-days: 30\r\n  cold:\r\n    retention-days: 365\r\n\r\n# Server Configuration\r\nserver:\r\n  port: 8080\r\n\r\n# Logging Configuration\r\nlogging:\r\n  level:\r\n    root: INFO\r\n    com.smartcity: DEBUG\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsx)(r.h3,{id:"mongodb",children:"MongoDB"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# WARM Tier\r\nMONGODB_WARM_URI=mongodb://admin:password123@core-mongo-warm:27017/warm_db?authSource=admin\r\n\r\n# COLD Tier\r\nMONGODB_COLD_URI=mongodb://admin:password123@core-mongo-cold:27017/cold_db?authSource=admin\n"})}),"\n",(0,o.jsx)(r.h3,{id:"redis",children:"Redis"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"REDIS_HOST=core-redis-hot\r\nREDIS_PORT=6379\n"})}),"\n",(0,o.jsx)(r.h3,{id:"rabbitmq",children:"RabbitMQ"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"RABBITMQ_ADDRESSES=rabbitmq-edge-1:5672,rabbitmq-edge-2:5673\r\nRABBITMQ_USERNAME=edge_user\r\nRABBITMQ_PASSWORD=edge_pass\n"})}),"\n",(0,o.jsx)(r.h3,{id:"ml-service",children:"ML Service"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"ML_SERVICE_URL=http://smart-city-ml:8000\r\nML_SERVICE_TIMEOUT=5000\n"})}),"\n",(0,o.jsx)(r.h3,{id:"application",children:"Application"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"SERVER_PORT=8080\r\nSPRING_PROFILES_ACTIVE=docker\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"profile-configurations",children:"Profile Configurations"}),"\n",(0,o.jsx)(r.h3,{id:"local-profile-application-localyml",children:"local Profile (application-local.yml)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"spring:\r\n  data:\r\n    mongodb:\r\n      warm:\r\n        uri: mongodb://localhost:27018/warm_db\r\n      cold:\r\n        uri: mongodb://localhost:27019/cold_db\r\n  redis:\r\n    host: localhost\r\n    port: 6379\r\n  rabbitmq:\r\n    addresses: localhost:5672,localhost:5673\r\n\r\nml:\r\n  service:\r\n    url: http://localhost:8000\n"})}),"\n",(0,o.jsx)(r.h3,{id:"docker-profile-application-dockeryml",children:"docker Profile (application-docker.yml)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"spring:\r\n  data:\r\n    mongodb:\r\n      warm:\r\n        uri: mongodb://admin:password123@core-mongo-warm:27017/warm_db?authSource=admin\r\n      cold:\r\n        uri: mongodb://admin:password123@core-mongo-cold:27017/cold_db?authSource=admin\r\n  redis:\r\n    host: core-redis-hot\r\n  rabbitmq:\r\n    addresses: rabbitmq-edge-1:5672,rabbitmq-edge-2:5673\r\n\r\nml:\r\n  service:\r\n    url: http://smart-city-ml:8000\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"configuration-properties-reference",children:"Configuration Properties Reference"}),"\n",(0,o.jsx)(r.h3,{id:"ingestion-properties",children:"Ingestion Properties"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Property"}),(0,o.jsx)(r.th,{children:"Type"}),(0,o.jsx)(r.th,{children:"Default"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"ingestion.batch.size"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"1000"}),(0,o.jsx)(r.td,{children:"Batch size cho m\u1ed7i pull"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"ingestion.batch.max-size"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"5000"}),(0,o.jsx)(r.td,{children:"Maximum batch size"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"ingestion.schedule.fixed-rate"})}),(0,o.jsx)(r.td,{children:"long"}),(0,o.jsx)(r.td,{children:"10000"}),(0,o.jsx)(r.td,{children:"Pull interval (ms)"})]})]})]}),"\n",(0,o.jsx)(r.h3,{id:"storage-properties",children:"Storage Properties"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Property"}),(0,o.jsx)(r.th,{children:"Type"}),(0,o.jsx)(r.th,{children:"Default"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"storage.hot.ttl-seconds"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"3600"}),(0,o.jsx)(r.td,{children:"Redis TTL (seconds)"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"storage.warm.retention-days"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"30"}),(0,o.jsx)(r.td,{children:"MongoDB WARM retention"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"storage.cold.retention-days"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"365"}),(0,o.jsx)(r.td,{children:"MongoDB COLD retention"})]})]})]}),"\n",(0,o.jsx)(r.h3,{id:"ml-service-properties",children:"ML Service Properties"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Property"}),(0,o.jsx)(r.th,{children:"Type"}),(0,o.jsx)(r.th,{children:"Default"}),(0,o.jsx)(r.th,{children:"Description"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"ml.service.url"})}),(0,o.jsx)(r.td,{children:"string"}),(0,o.jsx)(r.td,{children:"-"}),(0,o.jsx)(r.td,{children:"ML Service base URL"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"ml.service.timeout"})}),(0,o.jsx)(r.td,{children:"int"}),(0,o.jsx)(r.td,{children:"5000"}),(0,o.jsx)(r.td,{children:"Request timeout (ms)"})]})]})]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"docker-compose-configuration",children:"Docker Compose Configuration"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:'services:\r\n  smart-city-backend:\r\n    image: smart-city-backend:latest\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n      - MONGODB_WARM_URI=mongodb://admin:password123@core-mongo-warm:27017/warm_db?authSource=admin\r\n      - MONGODB_COLD_URI=mongodb://admin:password123@core-mongo-cold:27017/cold_db?authSource=admin\r\n      - REDIS_HOST=core-redis-hot\r\n      - RABBITMQ_ADDRESSES=rabbitmq-edge-1:5672,rabbitmq-edge-2:5673\r\n      - ML_SERVICE_URL=http://smart-city-ml:8000\r\n    ports:\r\n      - "8080:8080"\r\n    depends_on:\r\n      - rabbitmq-edge-1\r\n      - rabbitmq-edge-2\r\n      - core-redis-hot\r\n      - core-mongo-warm\r\n      - core-mongo-cold\r\n      - smart-city-ml\r\n    networks:\r\n      - smartcity-network\n'})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"tuning-guide",children:"Tuning Guide"}),"\n",(0,o.jsx)(r.h3,{id:"high-throughput",children:"High Throughput"}),"\n",(0,o.jsx)(r.p,{children:"\u0110\u1ec3 t\u0103ng throughput, adjust c\xe1c parameters sau:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"ingestion:\r\n  batch:\r\n    size: 5000      # T\u0103ng batch size\r\n    max-size: 10000\r\n  schedule:\r\n    fixed-rate: 5000  # Gi\u1ea3m interval (pull frequency h\u01a1n)\n"})}),"\n",(0,o.jsx)(r.h3,{id:"low-memory",children:"Low Memory"}),"\n",(0,o.jsx)(r.p,{children:"N\u1ebfu memory h\u1ea1n ch\u1ebf:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"ingestion:\r\n  batch:\r\n    size: 500       # Gi\u1ea3m batch size\r\n    max-size: 1000\r\n    \r\nstorage:\r\n  hot:\r\n    ttl-seconds: 1800  # Gi\u1ea3m TTL (30 ph\xfat)\n"})}),"\n",(0,o.jsx)(r.h3,{id:"production-deployment",children:"Production Deployment"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"logging:\r\n  level:\r\n    root: WARN\r\n    com.smartcity: INFO  # Gi\u1ea3m logging\r\n\r\nstorage:\r\n  warm:\r\n    retention-days: 90   # T\u0103ng retention\r\n  cold:\r\n    retention-days: 730  # 2 years\n"})})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>s});var i=n(6540);const o={},t=i.createContext(o);function d(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);